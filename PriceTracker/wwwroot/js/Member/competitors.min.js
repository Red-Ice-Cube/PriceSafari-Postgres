document.addEventListener("DOMContentLoaded",function(){const r=document.querySelectorAll('canvas[id^="chart-"]'),t=document.getElementById("storeSearch"),n=document.querySelectorAll("#competitors-table tbody tr"),i=document.getElementById("scrapable-count");r.forEach(n=>{const t=n.getContext("2d"),i=parseInt(n.getAttribute("data-same")),r=parseInt(n.getAttribute("data-higher")),u=parseInt(n.getAttribute("data-lower")),f=parseInt(n.getAttribute("data-total"));new Chart(t,{type:"bar",data:{labels:["Produkty"],datasets:[{label:"Masz niższą cene",data:[r],backgroundColor:"rgba(0, 145, 123, 0.8)",borderColor:"rgba(0, 145, 123, 1)",borderWidth:1,barThickness:18},{label:"Taka sama cena",data:[i],backgroundColor:"rgba(117, 152, 112, 0.8)",borderColor:"rgba(117, 152, 112, 1)",borderWidth:1,barThickness:18},{label:"Masz wyższą cene",data:[u],backgroundColor:"rgba(171, 37, 32, 0.8)",borderColor:"rgba(171, 37, 32, 1)",borderWidth:1,barThickness:18}]},options:{indexAxis:"y",scales:{x:{beginAtZero:!0,stacked:!0,max:f,display:!1,grid:{display:!1}},y:{stacked:!0,display:!1,grid:{display:!1}}},plugins:{tooltip:{callbacks:{label:function(n){let t=n.dataset.label||"";return t&&(t+=": "),n.raw!==null&&(t+=n.raw),t}}}},responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}}})});t.addEventListener("input",function(){const u=t.value.toLowerCase();let r=0;n.forEach(n=>{const t=n.querySelector(".competitor-name").textContent.toLowerCase();t.includes(u)?(n.style.display="",r++):n.style.display="none"});i.textContent=r});i.textContent=n.length;n.forEach(n=>{n.addEventListener("click",function(){const t=n.getAttribute("data-url");t&&(window.location.href=t)})})});