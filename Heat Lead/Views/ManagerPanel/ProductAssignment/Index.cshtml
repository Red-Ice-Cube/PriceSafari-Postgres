@model Heat_Lead.Models.Product

@{
    Layout = "~/Views/Shared/_PanelLayout.cshtml";
}

<div class="Page-Box">
    <div class="Page-Box-Container">
        <div class="Page-Box-Category">
            <div class="Category-Box-Title">
                Dodaj produkt
            </div>
            <partial name="_ManageNavCol" />
        </div>
        <div class="Horizontal">
            <img id="productImageDisplay" src="" alt="Brak zdjęcia" onerror="this.onerror=null; this.src='@Url.Content("~/images/No-Photo.jpg")'; this.alt='Domyślny obraz';" />
            <form asp-action="AddProduct" method="post" class="Column-Form">
                <div class="Horizontal">
                    <div class="Column">
                        <label>Wybierz kanał sprzedaży:</label>
                        <select id="storeDropdown" asp-items="@ViewBag.Stores" class="DropDown" required>
                        </select>
                    </div>
                    <div class="Column">
                        <label>Wybierz kategorię:</label>
                        <select id="categoryDropdown" asp-for="CategoryId" asp-items="@ViewBag.Categories" class="DropDown" required>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label asp-for="ProductName" class="control-label">Nazwa produktu</label>
                    <input asp-for="ProductName" class="form-control" maxlength="50" title="Maksymalna długość 50 znaków" />
                    <span asp-validation-for="ProductName" class="text-danger"></span>
                </div>
                <div class="Horizontal">
                    <div class="form-group">
                        <label class="control-label">ID produktu w sklepie</label>
                        <div id="productIdStoresContainer">
                            <input type="text" name="ProductIdStores" class="form-control" />
                        </div>
                        <button type="button" class="Button-Page-Small" style="margin-top:8px;" onclick="addProductIdStore()">Dodaj kolejne ID</button>
                    </div>
                    <div class="form-group">
                        <label asp-for="ProductPrice" class="control-label">Cena sprzedaży (PLN)</label>
                        <input asp-for="ProductPrice" class="form-control" type="number" step="0.01" id="ProductPrice" />
                        <span asp-validation-for="ProductPrice" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label asp-for="AffiliateCommission" class="control-label">Prowizja Partnera (PLN)</label>
                        <input id="AffiliateCommission" asp-for="AffiliateCommission" class="form-control" type="number" step="0.01" />
                        <span asp-validation-for="AffiliateCommission" class="text-danger"></span>
                        <div id="categoryCommissionInfo" style="margin-top: 8px; color: gray;">Procent prowizji dla kategorii: <span id="categoryCommissionPercentage"></span>%</div>
     
                    </div>
                </div>
                <div class="form-group">
                    <label asp-for="ProductURL" class="control-label">URL do karty produktu</label>
                    <input asp-for="ProductURL" class="form-control" />
                    <span asp-validation-for="ProductURL" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="ProductImage" class="control-label">URL do zdjęcia produktu</label>
                    <input id="productImageInput" asp-for="ProductImage" class="form-control" />
                    <span asp-validation-for="ProductImage" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <button type="submit" class="Button-Add-Small">Dodaj produkt</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    var noPhotoUrl = '@Url.Content("~/images/No-Photo.jpg")';
</script>

<script src="/js/Manager/productmanager.min.js"></script>
