<style>
    /* Kontener suwaka */
    .range-slider {
        position: relative;
        width: 100%;
        height: 60px; /* Więcej miejsca, żeby tekst pod spodem się nie nakładał */
        margin-top: 20px;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }

    /* Wartości "Od: 0 - Do: 31+" nad suwakiem */
    .range-values {
        display: block;
        text-align: center;
        font-weight: 600;
        color: #333;
        font-size: 15px;
        margin-bottom: 15px; /* Odstęp od paska */
    }

    /* Kontener paska (track) */
    .slider-track-container {
        position: relative;
        width: 100%;
        height: 6px;
        margin-top: 10px;
    }

    /* Tło paska (nieaktywna część - jasnoszara) */
    .slider-track {
        width: 100%;
        height: 6px;
        background-color: #e0e0e0;
        position: absolute;
        top: 0;
        border-radius: 3px;
    }

    /* Aktywny zakres (pomiędzy kciukami - ciemnoszary) */
    .slider-range {
        height: 6px;
        background-color: #5a5c69; /* Stonowany kolor */
        position: absolute;
        top: 0;
        border-radius: 3px;
        z-index: 1;
    }

    /* Inputy (niewidoczne, ale sterują) */
    .range-slider input[type="range"] {
        -webkit-appearance: none;
        pointer-events: none;
        position: absolute;
        height: 6px;
        width: 100%;
        background: none;
        top: 0;
        z-index: 2;
        margin: 0;
    }

        /* Stylizacja kciuka (Thumb) - Webkit */
        .range-slider input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            pointer-events: auto;
            height: 22px;
            width: 22px;
            border-radius: 50%;
            background: #fff;
            border: 2px solid #5a5c69;
            cursor: pointer;
            /* ZMIANA KLUCZOWA: -4px zamiast -8px.
                   Im bliżej zera, tym kulka jest niżej. */
            margin-top: -4px;
            z-index: 3;
            position: relative;
            box-shadow: 0 2px 4px rgba(0,0,0,0.15);
            transition: transform 0.1s ease;
        }

            .range-slider input[type="range"]::-webkit-slider-thumb:hover {
                transform: scale(1.1);
                background-color: #f8f9fc;
            }

        /* Stylizacja kciuka (Thumb) - Firefox */
        .range-slider input[type="range"]::-moz-range-thumb {
            pointer-events: auto;
            height: 22px;
            width: 22px;
            border-radius: 50%;
            background: #fff;
            border: 2px solid #5a5c69;
            cursor: pointer;
            z-index: 3;
            position: relative;
            box-shadow: 0 2px 4px rgba(0,0,0,0.15);
            transition: transform 0.1s ease;
            /* ZMIANA KLUCZOWA dla Firefoxa */
            margin-top: -4px;
        }

    /* Etykiety pod suwakiem */
    .range-labels {
        display: flex;
        justify-content: space-between;
        font-size: 12px;
        color: #858796;
        margin-top: 6px; /* Duży odstęp, żeby kciuk nie zasłaniał tekstu */
        font-weight: 500;
        padding: 0 2px;
    }

    /* Styl dla zablokowanej sekcji (widok BASE) */
    .disabled-section {
        opacity: 0.5;
        pointer-events: none;
        filter: grayscale(100%); /* Całkowite wyszarzenie */
    }
</style>

<div class="modal-sim fade" id="competitorModal" tabindex="-1" role="dialog">
    <div class="modal-dialog-sim" role="document">
        <div class="modal-simulation">

            <div id="loadingOverlay" class="loading-overlay" style="display: none;">
                <div class="loader"></div>
            </div>
            <div class="modal-header">
                <div class="price-box-column-name">Presety - Allegro</div>
                <div style="display:flex; gap:10px;">
                    <button id="addNewPresetBtn" class="Button-Page-Small-bl">Dodaj nowy preset</button>
                    <button type="button" class="close" data-dismiss="modal" style="width:33px; height:33px;" aria-label="Zamknij">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            </div>

            <div class="modal-body">
                <div style="display:flex; justify-content:space-between; gap:24px;">

                    <div style="display:flex; flex-direction:column;">
                        <select id="presetSelect" style="width:460px;" class="DropDown"></select>
                        <div style="display:flex; justify-content:space-between; margin-top:10px; width:460px;">
                            <div>
                                <span id="activateButtonContainer"></span>
                            </div>
                            <div style="display:flex; gap:5px;">
                                <span id="editButtonContainer"></span>
                                <span id="deleteButtonContainer"></span>
                            </div>
                        </div>

                        <div id="newPresetSection" style="display:none; margin-bottom: 20px;"></div>

                        <div style="display:flex; flex-direction:column; width:460px; border: 1px solid #EDEDED; padding:16px; border-radius:4px; margin-top:12px;">
                            <input type="text" id="competitorSearchInput" class="storeSearch" placeholder="Wyszukaj sprzedawcę" />

                            <div style="display:flex; justify-content:space-between; margin-top: 10px;">
                                <div>
                                    <div class="Category-Container-Select">Niezdefiniowani sprzedawcy</div>
                                    <div class="store-section">
                                        <div class="form-check">
                                            <input class="form-check-input bidFilter" type="checkbox" id="useUnmarkedStoresCheckbox">
                                            <label class="form-check-label" style="display:flex; justify-content:center;" for="useUnmarkedStoresCheckbox">Wyświetlaj</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="deliveryFilterSection" style="display:none; flex-direction:column; width:460px; margin-top:0px; border: 1px solid #EDEDED; padding:16px; border-radius:4px; margin-top:20px;">
                            <div class="Category-Container-Select" style="margin-bottom: 5px; margin-top:0px;">Czas dostawy w dniach</div>

                            <div class="range-slider">
                                <span class="range-values">
                                    Od: <span id="rangeMinVal">Natychmiast</span> - Do: <span id="rangeMaxVal">31+</span>
                                </span>
                                <div class="slider-track-container">
                                    <div class="slider-track"></div>
                                    <div class="slider-range" id="sliderRangeFill"></div>
                                    <input type="range" min="0" max="31" value="0" id="deliverySliderMin">
                                    <input type="range" min="0" max="31" value="31" id="deliverySliderMax">
                                </div>
                                <div class="range-labels">
                                    <span>Natychmiast</span>
                                    <span>Długa (31+)</span>
                                </div>
                            </div>

                           
                        </div>
                        <div style="display:flex; flex-direction:column; width:460px; margin-top:24px;">
                            <p style="margin-bottom:24px; font-size:15px;">
                                <strong>Presety Allegro filtrują widocznych sprzedawców.</strong><br><br>
                                Aktywny preset wpływa na widok główny. Jeśli wykluczysz sprzedawcę, który ma najniższą cenę, system wskaże kolejnego najtańszego jako punkt odniesienia.
                            </p>
                        </div>
                    </div>

                    <div style="flex: 1;">
                        <div class="table-scroll" style="max-height: 80vh; min-height: 80vh; overflow: auto;">
                            <table class="table-orders" style="width: 100%; min-width: 500px; white-space: nowrap; table-layout: auto;">
                                <thead>
                                    <tr>
                                        <th>
                                            <img src="/images/AllegroIcon.png" alt="Allegro Icon" style="width:17px; height:17px; margin-right:6px; margin-bottom:4px;">
                                            Sprzedawcy Allegro
                                        </th>
                                        <th>Wspólne produkty</th>
                                        <th>Akcje</th>
                                    </tr>
                                </thead>
                                <tbody id="allegroCompetitorsTableBody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>